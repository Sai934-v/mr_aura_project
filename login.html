<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login | MR_AURA</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #0d0d0d, #1a001a);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      color: #f5f5f5;
    }

    .container {
      background: rgba(25, 0, 51, 0.95);
      padding: 40px 30px;
      border-radius: 20px;
      box-shadow: 0 0 25px rgba(128, 0, 255, 0.3);
      width: 100%;
      max-width: 400px;
      text-align: center;
      backdrop-filter: blur(6px);
    }

    .logo img {
      width: 140px;
      margin-bottom: 20px;
      filter: brightness(1.6) saturate(1.5);
      box-shadow: 0 0 25px rgba(128, 0, 255, 0.6);
      transform: scale(1.05);
    }

    h2 {
      margin-bottom: 25px;
      color: #ffffff;
    }

    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="number"] {
      width: 100%;
      padding: 14px;
      margin: 10px 0 15px;
      border: 1px solid #999;
      border-radius: 8px;
      background-color: #2b003b;
      color: #f0f0f0;
      font-size: 16px;
    }

    input::placeholder {
      color: #bbbbbb;
    }

    input:focus {
      border-color: #9d4dff;
      outline: none;
      box-shadow: 0 0 6px rgba(128, 0, 255, 0.4);
    }

    button {
      width: 100%;
      padding: 14px;
      background-color: #8000ff;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.3s;
      margin-top: 10px;
    }

    button:hover {
      background-color: #5d00c1;
    }

    .error {
      color: #ff4d4d;
      font-size: 14px;
      margin-top: 10px;
    }

    .footer {
      margin-top: 20px;
      font-size: 14px;
      color: #999;
    }

    .link {
      margin-top: 10px;
      font-size: 14px;
    }

    .link a {
      color: #d7a7ff;
      text-decoration: none;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>

<div class="container">
  <div class="logo"><img src="aura.png" alt="MR_AURA Logo"></div>
  <h2 id="formTitle">Login to MR_AURA</h2>

  <!-- ✅ Login Form -->
  <div id="loginForm">
    <input type="email" id="loginEmail" placeholder="Email Address" required />
    <input type="password" id="loginPassword" placeholder="Password" required />
    <button onclick="login()">Login</button>
    <div class="link">
      <a href="#" onclick="showSignup()">New user? Sign up</a> | 
      <a href="#" onclick="showForgot()">Forgot Password?</a>
    </div>
    <div id="loginError" class="error"></div>
  </div>

  <!-- ✅ Signup Form -->
  <div id="signupForm" class="hidden">
    <input type="text" id="signupName" placeholder="Full Name" required />
    <input type="email" id="signupEmail" placeholder="Email Address" required />
    <input type="number" id="signupPhone" placeholder="Phone Number" required />
    <input type="password" id="signupPassword" placeholder="Create Password" required />
    <button onclick="sendOTP('signup')">Send OTP</button>
    <input type="text" id="signupOTP" placeholder="Enter OTP" class="hidden" />
    <button class="hidden" id="signupVerifyBtn" onclick="verifySignupOTP()">Verify & Create Account</button>
    <div class="link"><a href="#" onclick="showLogin()">Back to Login</a></div>
    <div id="signupError" class="error"></div>
  </div>

  <!-- ✅ Forgot Password Form -->
  <div id="forgotForm" class="hidden">
    <input type="email" id="forgotEmail" placeholder="Email Address" required />
    <input type="number" id="forgotPhone" placeholder="Phone Number" required />
    <button onclick="sendOTP('forgot')">Send OTP</button>
    <input type="text" id="forgotOTP" placeholder="Enter OTP" class="hidden" />
    <input type="password" id="newPassword" placeholder="New Password" class="hidden" />
    <button class="hidden" id="resetBtn" onclick="resetPassword()">Reset Password</button>
    <div class="link"><a href="#" onclick="showLogin()">Back to Login</a></div>
    <div id="forgotError" class="error"></div>
  </div>

  <div class="footer">© 2025 MR_AURA Clothing</div>
</div>

<script>
  function showSignup() {
    document.getElementById("formTitle").innerText = "Create Account";
    document.getElementById("loginForm").classList.add("hidden");
    document.getElementById("signupForm").classList.remove("hidden");
    document.getElementById("forgotForm").classList.add("hidden");
  }

  function showLogin() {
    document.getElementById("formTitle").innerText = "Login to MR_AURA";
    document.getElementById("loginForm").classList.remove("hidden");
    document.getElementById("signupForm").classList.add("hidden");
    document.getElementById("forgotForm").classList.add("hidden");
  }

  function showForgot() {
    document.getElementById("formTitle").innerText = "Reset Password";
    document.getElementById("loginForm").classList.add("hidden");
    document.getElementById("signupForm").classList.add("hidden");
    document.getElementById("forgotForm").classList.remove("hidden");
  }

  function login() {
    const email = document.getElementById("loginEmail").value.trim();
    const password = document.getElementById("loginPassword").value.trim();
    const errorBox = document.getElementById("loginError");

    const users = JSON.parse(localStorage.getItem("users")) || [];
    const user = users.find(u => u.email === email && u.password === password);

    if (!user) {
      errorBox.textContent = "Invalid email or password.";
      return;
    }

    localStorage.setItem("activeAccount", email);
    window.location.href = "home.html";
  }

  function sendOTP(type) {
    const otp = Math.floor(100000 + Math.random() * 900000).toString();
    localStorage.setItem("tempOTP", otp);
    alert("Your OTP is: " + otp); // Simulate sending OTP

    if (type === "signup") {
      document.getElementById("signupOTP").classList.remove("hidden");
      document.getElementById("signupVerifyBtn").classList.remove("hidden");
    } else {
      document.getElementById("forgotOTP").classList.remove("hidden");
      document.getElementById("newPassword").classList.remove("hidden");
      document.getElementById("resetBtn").classList.remove("hidden");
    }
  }

  function verifySignupOTP() {
    const otp = document.getElementById("signupOTP").value.trim();
    const storedOTP = localStorage.getItem("tempOTP");

    if (otp !== storedOTP) {
      document.getElementById("signupError").textContent = "Invalid OTP.";
      return;
    }

    const name = document.getElementById("signupName").value.trim();
    const email = document.getElementById("signupEmail").value.trim();
    const phone = document.getElementById("signupPhone").value.trim();
    const password = document.getElementById("signupPassword").value.trim();

    const users = JSON.parse(localStorage.getItem("users")) || [];

    if (users.find(u => u.email === email)) {
      document.getElementById("signupError").textContent = "Email already exists.";
      return;
    }

    users.push({ name, email, phone, password });
    localStorage.setItem("users", JSON.stringify(users));
    localStorage.setItem("activeAccount", email);
    localStorage.setItem("isNewUser", "true");
    window.location.href = "home.html";
  }

  function resetPassword() {
    const otp = document.getElementById("forgotOTP").value.trim();
    const newPass = document.getElementById("newPassword").value.trim();
    const email = document.getElementById("forgotEmail").value.trim();
    const phone = document.getElementById("forgotPhone").value.trim();
    const storedOTP = localStorage.getItem("tempOTP");

    if (otp !== storedOTP) {
      document.getElementById("forgotError").textContent = "Incorrect OTP.";
      return;
    }

    let users = JSON.parse(localStorage.getItem("users")) || [];
    const index = users.findIndex(u => u.email === email && u.phone === phone);
    if (index !== -1) {
      users[index].password = newPass;
      localStorage.setItem("users", JSON.stringify(users));
      alert("Password updated successfully.");
      showLogin();
    } else {
      document.getElementById("forgotError").textContent = "User not found.";
    }
  }
</script>

</body>
</html>
